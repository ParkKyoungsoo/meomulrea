{"remainingRequest":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\babel-loader\\lib\\index.js!C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\vuetify-loader\\lib\\loader.js??ref--17-0!C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SSAFY\\git\\s03p23b304\\fe_chat\\src\\components\\Chat\\Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\src\\components\\Chat\\Chat.vue","mtime":1600910340540},{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SSAFY\\git\\s03p23b304\\fe_chat\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE1lc3NhZ2UgZnJvbSAnLi9wYXJ0cy9NZXNzYWdlLnZ1ZSc7CmltcG9ydCBFbW9qaVBpY2tlciBmcm9tICcuL3BhcnRzL0Vtb2ppUGlja2VyLnZ1ZSc7CmltcG9ydCBDaGF0cyBmcm9tICcuL3BhcnRzL0NoYXRzLnZ1ZSc7CmltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAnJywKICAgICAgY2hhdE1lc3NhZ2VzOiBbXSwKICAgICAgZW1vamlQYW5lbDogZmFsc2UsCiAgICAgIGN1cnJlbnRSZWY6IHt9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdG90YWxDaGF0SGVpZ2h0OiAwCiAgICB9OwogIH0sCiAgcHJvcHM6IFsnaWQnXSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkQ2hhdCgpOwogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRPbmxpbmVVc2VycycpOwogIH0sCiAgY29tcG9uZW50czogewogICAgJ21lc3NhZ2UnOiBNZXNzYWdlLAogICAgJ2Vtb2ppLXBpY2tlcic6IEVtb2ppUGlja2VyLAogICAgJ2NoYXRzJzogQ2hhdHMKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtZXNzYWdlczogZnVuY3Rpb24gbWVzc2FnZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoYXRNZXNzYWdlczsKICAgIH0sCiAgICB1c2VybmFtZTogZnVuY3Rpb24gdXNlcm5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXIudXNlcm5hbWU7CiAgICB9LAogICAgb25OZXdNZXNzYWdlQWRkZWQ6IGZ1bmN0aW9uIG9uTmV3TWVzc2FnZUFkZGVkKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICB2YXIgb25OZXdNZXNzYWdlQWRkZWQgPSBmdW5jdGlvbiBvbk5ld01lc3NhZ2VBZGRlZChzbmFwc2hvdCkgewogICAgICAgIHZhciBuZXdNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwogICAgICAgIHZhciBtZXNzYWdlID0gc25hcHNob3QudmFsKCk7CiAgICAgICAgbWVzc2FnZS5rZXkgPSBzbmFwc2hvdC5rZXk7CiAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqLwoKICAgICAgICB2YXIgdXJsUGF0dGVybiA9IC8oXGIoaHR0cHM/fGZ0cHxmaWxlKTpcL1wvWy1BLVowLTkrJkAjXC8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjXC8lPX5ffF0pL2lnOwogICAgICAgIC8qZXNsaW50LWVuYWJsZSAqLwoKICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoLyIvZywgJyZxdW90OycpLnJlcGxhY2UoLycvZywgJyYjMDM5OycpOwogICAgICAgIG1lc3NhZ2UuY29udGVudCA9IG1lc3NhZ2UuY29udGVudC5yZXBsYWNlKHVybFBhdHRlcm4sICI8YSBocmVmPSckMSc+JDE8L2E+Iik7CgogICAgICAgIGlmICghbmV3TWVzc2FnZSkgewogICAgICAgICAgdGhhdC5jaGF0TWVzc2FnZXMudW5zaGlmdCh0aGF0LnByb2Nlc3NNZXNzYWdlKG1lc3NhZ2UpKTsKICAgICAgICAgIHRoYXQuc2Nyb2xsVG8oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhhdC5jaGF0TWVzc2FnZXMucHVzaCh0aGF0LnByb2Nlc3NNZXNzYWdlKG1lc3NhZ2UpKTsKICAgICAgICAgIHRoYXQuc2Nyb2xsVG9FbmQoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gb25OZXdNZXNzYWdlQWRkZWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJyRyb3V0ZS5wYXJhbXMuaWQnOiBmdW5jdGlvbiAkcm91dGVQYXJhbXNJZChuZXdJZCwgb2xkSWQpIHsKICAgICAgdGhpcy5jdXJyZW50UmVmLm9mZignY2hpbGRfYWRkZWQnLCB0aGlzLm9uTmV3TWVzc2FnZUFkZGVkKTsKICAgICAgdGhpcy5sb2FkQ2hhdCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZENoYXQ6IGZ1bmN0aW9uIGxvYWRDaGF0KCkgewogICAgICB0aGlzLnRvdGFsQ2hhdEhlaWdodCA9IHRoaXMuJHJlZnMuY2hhdENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuY2hhdE1lc3NhZ2VzID0gW107CiAgICAgICAgdmFyIGNoYXRJRCA9IHRoaXMuaWQ7CiAgICAgICAgdGhpcy5jdXJyZW50UmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ21lc3NhZ2VzJykuY2hpbGQoY2hhdElEKS5jaGlsZCgnbWVzc2FnZXMnKS5saW1pdFRvTGFzdCgyMCk7CiAgICAgICAgdGhpcy5jdXJyZW50UmVmLm9uKCdjaGlsZF9hZGRlZCcsIHRoaXMub25OZXdNZXNzYWdlQWRkZWQpOwogICAgICB9CiAgICB9LAogICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKCkgewogICAgICB2YXIgc2Nyb2xsVmFsdWUgPSB0aGlzLiRyZWZzLmNoYXRDb250YWluZXIuc2Nyb2xsVG9wOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICBpZiAoc2Nyb2xsVmFsdWUgPCAxMDAgJiYgIXRoaXMubG9hZGluZykgewogICAgICAgIHRoaXMudG90YWxDaGF0SGVpZ2h0ID0gdGhpcy4kcmVmcy5jaGF0Q29udGFpbmVyLnNjcm9sbEhlaWdodDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIHZhciBjaGF0SUQgPSB0aGlzLmlkOwogICAgICAgIHZhciBjdXJyZW50VG9wTWVzc2FnZSA9IHRoaXMuY2hhdE1lc3NhZ2VzWzBdOwoKICAgICAgICBpZiAoY3VycmVudFRvcE1lc3NhZ2UgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignbWVzc2FnZXMnKS5jaGlsZChjaGF0SUQpLmNoaWxkKCdtZXNzYWdlcycpLm9yZGVyQnlLZXkoKS5lbmRBdChjdXJyZW50VG9wTWVzc2FnZS5rZXkpLmxpbWl0VG9MYXN0KDIwKS5vbmNlKCd2YWx1ZScpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICB2YXIgdGVtcEFycmF5ID0gW107CiAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHRlbXBBcnJheS5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodGVtcEFycmF5WzBdLmtleSA9PT0gdGVtcEFycmF5WzFdLmtleSkgcmV0dXJuOwogICAgICAgICAgdGVtcEFycmF5LnJldmVyc2UoKTsKICAgICAgICAgIHRlbXBBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICB0aGF0Lm9uTmV3TWVzc2FnZUFkZGVkKGNoaWxkLCBmYWxzZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoYXQubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcHJvY2Vzc01lc3NhZ2U6IGZ1bmN0aW9uIHByb2Nlc3NNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgLyplc2xpbnQtZGlzYWJsZSAqLwogICAgICB2YXIgaW1hZ2VSZWdleCA9IC8oW15cc1wnXSspLig/OmpwZ3xqcGVnfGdpZnxwbmcpL2k7CiAgICAgIC8qZXNsaW50LWVuYWJsZSAqLwoKICAgICAgaWYgKGltYWdlUmVnZXgudGVzdChtZXNzYWdlLmNvbnRlbnQpKSB7CiAgICAgICAgbWVzc2FnZS5pbWFnZSA9IGltYWdlUmVnZXguZXhlYyhtZXNzYWdlLmNvbnRlbnQpWzBdOwogICAgICB9CgogICAgICB2YXIgZW1vamlSZWdleCA9IC8oKD86W1x1MjYwMC1cdTI3QkZcdTI5MzQtXHVEN0ZGXHVFMDAwLVx1RkZGRl18W1x1RDgwMC1cdUQ4M0JdW1x1REMwMC1cdURGRkZdfFx1RDgzQ1tcdURDMDAtXHVERDhFXHVERDkxLVx1REU1MVx1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVERTRGXHVERTgwLVx1REVGRl18XHVEODNFW1x1REQwMC1cdURERkZdfFtcdUQ4MDAtXHVEQkZGXSg/IVtcdURDMDAtXHVERkZGXSl8KD86W15cdUQ4MDAtXHVEQkZGXXxeKVtcdURDMDAtXHVERkZGXSkpL2c7CgogICAgICBpZiAoZW1vamlSZWdleC50ZXN0KG1lc3NhZ2UuY29udGVudCkpIHsKICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQucmVwbGFjZShlbW9qaVJlZ2V4LCAnPHNwYW4gY2xhc3M9ImVtb2ppIj4kMTwvc3Bhbj4nKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9LAogICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkgewogICAgICBpZiAodGhpcy5jb250ZW50ICE9PSAnJykgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZW5kTWVzc2FnZScsIHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LAogICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b1N0cmluZygpLAogICAgICAgICAgY2hhdElEOiB0aGlzLmlkCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jb250ZW50ID0gJyc7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb0VuZDogZnVuY3Rpb24gc2Nyb2xsVG9FbmQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jb250YWluZXInKTsKCiAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNjcm9sbFRvOiBmdW5jdGlvbiBzY3JvbGxUbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGN1cnJlbnRIZWlnaHQgPSBfdGhpczIuJHJlZnMuY2hhdENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSBjdXJyZW50SGVpZ2h0IC0gX3RoaXMyLnRvdGFsQ2hhdEhlaWdodDsKCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzMi4kZWwucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7CgogICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBkaWZmZXJlbmNlOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRFbW9qaVRvTWVzc2FnZTogZnVuY3Rpb24gYWRkRW1vamlUb01lc3NhZ2UoZW1vamkpIHsKICAgICAgdGhpcy5jb250ZW50ICs9IGVtb2ppLnZhbHVlOwogICAgfSwKICAgIHRvZ2dsZUVtb2ppUGFuZWw6IGZ1bmN0aW9uIHRvZ2dsZUVtb2ppUGFuZWwoKSB7CiAgICAgIHRoaXMuZW1vamlQYW5lbCA9ICF0aGlzLmVtb2ppUGFuZWw7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,OAAA,MAAA,qBAAA;AACA,OAAA,WAAA,MAAA,yBAAA;AACA,OAAA,KAAA,MAAA,mBAAA;AACA,OAAA,KAAA,QAAA,MAAA,UAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,KAHA;AAIA,MAAA,UAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA,KALA;AAMA,MAAA,eAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,KAAA,EAAA,CACA,IADA,CAXA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,QAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,iBAAA;AACA,GAjBA;AAkBA,EAAA,UAAA,EAAA;AACA,eAAA,OADA;AAEA,oBAAA,WAFA;AAGA,aAAA;AAHA,GAlBA;AAuBA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,YAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,KANA;AAOA,IAAA,iBAPA,+BAOA;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,iBAAA,GAAA,SAAA,iBAAA,CAAA,QAAA,EAAA;AAAA,YAAA,UAAA,uEAAA,IAAA;AACA,YAAA,OAAA,GAAA,QAAA,CAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,GAAA,QAAA,CAAA,GAAA;AACA;;AACA,YAAA,UAAA,GAAA,6EAAA;AACA;;AACA,QAAA,OAAA,CAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CACA,OADA,CACA,IADA,EACA,OADA,EAEA,OAFA,CAEA,IAFA,EAEA,MAFA,EAGA,OAHA,CAGA,IAHA,EAGA,MAHA,EAIA,OAJA,CAIA,IAJA,EAIA,QAJA,EAKA,OALA,CAKA,IALA,EAKA,QALA,CAAA;AAMA,QAAA,OAAA,CAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,EAAA,qBAAA,CAAA;;AACA,YAAA,CAAA,UAAA,EAAA;AACA,UAAA,IAAA,CAAA,YAAA,CAAA,OAAA,CAAA,IAAA,CAAA,cAAA,CAAA,OAAA,CAAA;AACA,UAAA,IAAA,CAAA,QAAA;AACA,SAHA,MAGA;AACA,UAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,IAAA,CAAA,cAAA,CAAA,OAAA,CAAA;AACA,UAAA,IAAA,CAAA,WAAA;AACA;AACA,OApBA;;AAqBA,aAAA,iBAAA;AACA;AA/BA,GAvBA;AAwDA,EAAA,KAAA,EAAA;AACA,sBADA,0BACA,KADA,EACA,KADA,EACA;AACA,WAAA,UAAA,CAAA,GAAA,CAAA,aAAA,EAAA,KAAA,iBAAA;AACA,WAAA,QAAA;AACA;AAJA,GAxDA;AA8DA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,eAAA,GAAA,KAAA,KAAA,CAAA,aAAA,CAAA,YAAA;AACA,WAAA,OAAA,GAAA,KAAA;;AACA,UAAA,KAAA,EAAA,KAAA,SAAA,EAAA;AACA,aAAA,YAAA,GAAA,EAAA;AACA,YAAA,MAAA,GAAA,KAAA,EAAA;AACA,aAAA,UAAA,GAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,UAAA,EAAA,KAAA,CAAA,MAAA,EAAA,KAAA,CAAA,UAAA,EAAA,WAAA,CAAA,EAAA,CAAA;AACA,aAAA,UAAA,CAAA,EAAA,CAAA,aAAA,EAAA,KAAA,iBAAA;AACA;AACA,KAVA;AAWA,IAAA,QAXA,sBAWA;AACA,UAAA,WAAA,GAAA,KAAA,KAAA,CAAA,aAAA,CAAA,SAAA;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,WAAA,GAAA,GAAA,IAAA,CAAA,KAAA,OAAA,EAAA;AACA,aAAA,eAAA,GAAA,KAAA,KAAA,CAAA,aAAA,CAAA,YAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,YAAA,MAAA,GAAA,KAAA,EAAA;AACA,YAAA,iBAAA,GAAA,KAAA,YAAA,CAAA,CAAA,CAAA;;AACA,YAAA,iBAAA,KAAA,SAAA,EAAA;AACA,eAAA,OAAA,GAAA,KAAA;AACA;AACA;;AACA,QAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,UAAA,EAAA,KAAA,CAAA,MAAA,EAAA,KAAA,CAAA,UAAA,EAAA,UAAA,GAAA,KAAA,CAAA,iBAAA,CAAA,GAAA,EAAA,WAAA,CAAA,EAAA,EAAA,IAAA,CAAA,OAAA,EAAA,IAAA,CACA,UAAA,QAAA,EAAA;AACA,cAAA,SAAA,GAAA,EAAA;AACA,UAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,SAAA,CAAA,IAAA,CAAA,IAAA;AACA,WAFA;AAGA,cAAA,SAAA,CAAA,CAAA,CAAA,CAAA,GAAA,KAAA,SAAA,CAAA,CAAA,CAAA,CAAA,GAAA,EAAA;AACA,UAAA,SAAA,CAAA,OAAA;AACA,UAAA,SAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AAAA,YAAA,IAAA,CAAA,iBAAA,CAAA,KAAA,EAAA,KAAA;AAAA,WAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,KAAA;AACA,SAVA;AAYA;AACA,KApCA;AAqCA,IAAA,cArCA,0BAqCA,OArCA,EAqCA;AACA;AACA,UAAA,UAAA,GAAA,kCAAA;AACA;;AACA,UAAA,UAAA,CAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,GAAA,UAAA,CAAA,IAAA,CAAA,OAAA,CAAA,OAAA,EAAA,CAAA,CAAA;AACA;;AACA,UAAA,UAAA,GAAA,mQAAA;;AACA,UAAA,UAAA,CAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,EAAA,+BAAA,CAAA;AACA;;AACA,aAAA,OAAA;AACA,KAjDA;AAkDA,IAAA,WAlDA,yBAkDA;AACA,UAAA,KAAA,OAAA,KAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA;AAAA,UAAA,QAAA,EAAA,KAAA,QAAA;AAAA,UAAA,OAAA,EAAA,KAAA,OAAA;AAAA,UAAA,IAAA,EAAA,IAAA,IAAA,GAAA,QAAA,EAAA;AAAA,UAAA,MAAA,EAAA,KAAA;AAAA,SAAA;AACA,aAAA,OAAA,GAAA,EAAA;AACA;AACA,KAvDA;AAwDA,IAAA,WAxDA,yBAwDA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,YAAA,SAAA,GAAA,KAAA,CAAA,GAAA,CAAA,aAAA,CAAA,iBAAA,CAAA;;AACA,QAAA,SAAA,CAAA,SAAA,GAAA,SAAA,CAAA,YAAA;AACA,OAHA;AAIA,KA7DA;AA8DA,IAAA,QA9DA,sBA8DA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,YAAA,aAAA,GAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,YAAA;AACA,YAAA,UAAA,GAAA,aAAA,GAAA,MAAA,CAAA,eAAA;;AACA,YAAA,SAAA,GAAA,MAAA,CAAA,GAAA,CAAA,aAAA,CAAA,iBAAA,CAAA;;AACA,QAAA,SAAA,CAAA,SAAA,GAAA,UAAA;AACA,OALA;AAMA,KArEA;AAsEA,IAAA,iBAtEA,6BAsEA,KAtEA,EAsEA;AACA,WAAA,OAAA,IAAA,KAAA,CAAA,KAAA;AACA,KAxEA;AAyEA,IAAA,gBAzEA,8BAyEA;AACA,WAAA,UAAA,GAAA,CAAA,KAAA,UAAA;AACA;AA3EA;AA9DA,CAAA","sourcesContent":["<template>\r\n  <v-container fluid style=\"padding: 0;\">\r\n    <v-row no-gutters>\r\n      <v-col sm=\"2\" class=\"scrollable\">\r\n        <chats></chats>\r\n      </v-col>\r\n      <v-col sm=\"10\" style=\"position: relative;\">\r\n        <div class=\"chat-container\" v-on:scroll=\"onScroll\" ref=\"chatContainer\" >\r\n          <message :messages=\"messages\" @imageLoad=\"scrollToEnd\"></message>\r\n        </div>\r\n        <emoji-picker :show=\"emojiPanel\" @close=\"toggleEmojiPanel\" @click=\"addEmojiToMessage\"></emoji-picker>\r\n        <div class=\"typer\">\r\n          <input type=\"text\" placeholder=\"Type here...\" v-on:keyup.enter=\"sendMessage\" v-model=\"content\">\r\n          <v-btn icon class=\"blue--text emoji-panel\" @click=\"toggleEmojiPanel\">\r\n            <v-icon>mdi-emoticon-outline</v-icon>\r\n          </v-btn>\r\n        </div>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\n  import Message from './parts/Message.vue'\r\n  import EmojiPicker from './parts/EmojiPicker.vue'\r\n  import Chats from './parts/Chats.vue'\r\n  import * as firebase from 'firebase'\r\n\r\n  export default {\r\n    data () {\r\n      return {\r\n        content: '',\r\n        chatMessages: [],\r\n        emojiPanel: false,\r\n        currentRef: {},\r\n        loading: false,\r\n        totalChatHeight: 0\r\n      }\r\n    },\r\n    props: [\r\n      'id'\r\n    ],\r\n    mounted () {\r\n      this.loadChat()\r\n      this.$store.dispatch('loadOnlineUsers')\r\n    },\r\n    components: {\r\n      'message': Message,\r\n      'emoji-picker': EmojiPicker,\r\n      'chats': Chats\r\n    },\r\n    computed: {\r\n      messages () {\r\n        return this.chatMessages\r\n      },\r\n      username () {\r\n        return this.$store.getters.user.username\r\n      },\r\n      onNewMessageAdded () {\r\n        const that = this\r\n        let onNewMessageAdded = function (snapshot, newMessage = true) {\r\n          let message = snapshot.val()\r\n          message.key = snapshot.key\r\n          /*eslint-disable */\r\n          var urlPattern = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig\r\n          /*eslint-enable */\r\n          message.content = message.content\r\n            .replace(/&/g, '&amp;')\r\n            .replace(/</g, '&lt;')\r\n            .replace(/>/g, '&gt;')\r\n            .replace(/\"/g, '&quot;')\r\n            .replace(/'/g, '&#039;')\r\n          message.content = message.content.replace(urlPattern, \"<a href='$1'>$1</a>\")\r\n          if (!newMessage) {\r\n            that.chatMessages.unshift(that.processMessage(message))\r\n            that.scrollTo()\r\n          } else {\r\n            that.chatMessages.push(that.processMessage(message))\r\n            that.scrollToEnd()\r\n          }\r\n        }\r\n        return onNewMessageAdded\r\n      }\r\n    },\r\n    watch: {\r\n      '$route.params.id' (newId, oldId) {\r\n        this.currentRef.off('child_added', this.onNewMessageAdded)\r\n        this.loadChat()\r\n      }\r\n    },\r\n    methods: {\r\n      loadChat () {\r\n        this.totalChatHeight = this.$refs.chatContainer.scrollHeight\r\n        this.loading = false\r\n        if (this.id !== undefined) {\r\n          this.chatMessages = []\r\n          let chatID = this.id\r\n          this.currentRef = firebase.database().ref('messages').child(chatID).child('messages').limitToLast(20)\r\n          this.currentRef.on('child_added', this.onNewMessageAdded)\r\n        }\r\n      },\r\n      onScroll () {\r\n        let scrollValue = this.$refs.chatContainer.scrollTop\r\n        const that = this\r\n        if (scrollValue < 100 && !this.loading) {\r\n          this.totalChatHeight = this.$refs.chatContainer.scrollHeight\r\n          this.loading = true\r\n          let chatID = this.id\r\n          let currentTopMessage = this.chatMessages[0]\r\n          if (currentTopMessage === undefined) {\r\n            this.loading = false\r\n            return\r\n          }\r\n          firebase.database().ref('messages').child(chatID).child('messages').orderByKey().endAt(currentTopMessage.key).limitToLast(20).once('value').then(\r\n            function (snapshot) {\r\n              let tempArray = []\r\n              snapshot.forEach(function (item) {\r\n                tempArray.push(item)\r\n              })\r\n              if (tempArray[0].key === tempArray[1].key) return\r\n              tempArray.reverse()\r\n              tempArray.forEach(function (child) { that.onNewMessageAdded(child, false) })\r\n              that.loading = false\r\n            }\r\n          )\r\n        }\r\n      },\r\n      processMessage (message) {\r\n        /*eslint-disable */\r\n        var imageRegex = /([^\\s\\']+).(?:jpg|jpeg|gif|png)/i\r\n        /*eslint-enable */\r\n        if (imageRegex.test(message.content)) {\r\n          message.image = imageRegex.exec(message.content)[0]\r\n        }\r\n        var emojiRegex = /([\\u{1f300}-\\u{1f5ff}\\u{1f900}-\\u{1f9ff}\\u{1f600}-\\u{1f64f}\\u{1f680}-\\u{1f6ff}\\u{2600}-\\u{26ff}\\u{2700}-\\u{27bf}\\u{1f1e6}-\\u{1f1ff}\\u{1f191}-\\u{1f251}\\u{2934}-\\u{1f18e}])/gu\r\n        if (emojiRegex.test(message.content)) {\r\n          message.content = message.content.replace(emojiRegex, '<span class=\"emoji\">$1</span>')\r\n        }\r\n        return message\r\n      },\r\n      sendMessage () {\r\n        if (this.content !== '') {\r\n          this.$store.dispatch('sendMessage', { username: this.username, content: this.content, date: new Date().toString(), chatID: this.id })\r\n          this.content = ''\r\n        }\r\n      },\r\n      scrollToEnd () {\r\n        this.$nextTick(() => {\r\n          var container = this.$el.querySelector('.chat-container')\r\n          container.scrollTop = container.scrollHeight\r\n        })\r\n      },\r\n      scrollTo () {\r\n        this.$nextTick(() => {\r\n          let currentHeight = this.$refs.chatContainer.scrollHeight\r\n          let difference = currentHeight - this.totalChatHeight\r\n          var container = this.$el.querySelector('.chat-container')\r\n          container.scrollTop = difference\r\n        })\r\n      },\r\n      addEmojiToMessage (emoji) {\r\n        this.content += emoji.value\r\n      },\r\n      toggleEmojiPanel () {\r\n        this.emojiPanel = !this.emojiPanel\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .scrollable {\r\n    overflow-y: auto;\r\n    height: 90vh;\r\n  }\r\n  .typer{\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: center;\r\n    bottom: 0;\r\n    height: 4.9rem;\r\n    width: 100%;\r\n    background-color: #fff;\r\n    box-shadow: 0 -5px 10px -5px rgba(0,0,0,.2);\r\n  }\r\n  .typer input[type=text]{\r\n    position: absolute;\r\n    left: 2.5rem;\r\n    padding: 1rem;\r\n    width: 80%;\r\n    background-color: transparent;\r\n    border: none;\r\n    outline: none;\r\n    font-size: 1.25rem;\r\n  }\r\n  .chat-container{\r\n    box-sizing: border-box;\r\n    height: calc(100vh - 9.5rem);\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n    background-color: #f2f2f2;\r\n  }\r\n  .message{\r\n    margin-bottom: 3px;\r\n  }\r\n  .message.own{\r\n    text-align: right;\r\n  }\r\n  .message.own .content{\r\n    background-color: lightskyblue;\r\n  }\r\n  .chat-container .username{\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n  }\r\n  .chat-container .content{\r\n    padding: 8px;\r\n    background-color: lightgreen;\r\n    border-radius: 10px;\r\n    display:inline-block;\r\n    box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2), 0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12);\r\n    max-width: 50%;\r\n    word-wrap: break-word;\r\n    }\r\n  @media (max-width: 480px) {\r\n    .chat-container .content{\r\n      max-width: 60%;\r\n    }\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/Chat"}]}